---
title: Seguridad del Sistema
description: Visi√≥n general de la estrategia de seguridad en el ecosistema contable Nostromo.
sidebar:
  label: Introducci√≥n
  order: 1
updated: 2026-01-03
---

import {
  Card,
  CardGrid,
  LinkCard,
  Aside,
  Steps,
} from "@astrojs/starlight/components";

La seguridad en el ecosistema Nostromo/Jean d'Arc se basa en el principio de **Defensa en Profundidad**, implementando controles en cada capa de la arquitectura, desde la infraestructura hasta la interfaz de usuario.

---

## Pilares de Seguridad

<CardGrid>
  <Card title="üîê Autenticaci√≥n Robusta" icon="star">
    Acceso protegido por **JWT (JSON Web Tokens)**. Ninguna ruta API cr√≠tica es
    accesible sin credenciales v√°lidas.
  </Card>
  <Card title="üè¢ Aislamiento Multi-Tenant" icon="seti:db">
    Cada cliente opera en un **esquema de BD aislado**. Prevenci√≥n de filtraci√≥n
    de datos a nivel estructural.
  </Card>
  <Card title="üîë Protecci√≥n de Secretos" icon="setting">
    Credenciales manejadas exclusivamente via **Variables de Entorno**. Sin
    hardcoding en c√≥digo fuente.
  </Card>
  <Card title="üîç Auditor√≠a Continua" icon="magnifier">
    Revisi√≥n regular de dependencias y an√°lisis est√°tico. `npm audit` +
    revisiones manuales.
  </Card>
</CardGrid>

---

## Modelo de Defensa en Profundidad

```mermaid
graph TD
    subgraph Capa1["‚òÅÔ∏è Edge (Cloudflare)"]
        CF[WAF + DDoS Protection]
    end

    subgraph Capa2["üñ•Ô∏è Backend (Render)"]
        API[Orchestrator API]
        AUTH[Auth Middleware]
    end

    subgraph Capa3["üóÑÔ∏è Datos (PostgreSQL)"]
        DB[(mother)]
        TENANT[(Tenant DBs)]
    end

    CF -->|HTTPS/TLS| API
    API --> AUTH
    AUTH -->|Validated JWT| DB
    AUTH -->|Tenant Resolver| TENANT

    classDef edge fill:#f39c12,stroke:#d35400,color:#000;
    classDef backend fill:#27ae60,stroke:#2ecc71,color:#fff;
    classDef data fill:#16a085,stroke:#1abc9c,color:#fff;

    class CF edge;
    class API,AUTH backend;
    class DB,TENANT data;
```

---

## Mapa de Riesgos y Mitigaciones

| Amenaza                        | Mitigaci√≥n Implementada                                           | Estado |
| :----------------------------- | :---------------------------------------------------------------- | :----: |
| **SQL Injection**              | Uso estricto de `pg-pool` con consultas parametrizadas (`$1, $2`) |   ‚úÖ   |
| **XSS (Cross-Site Scripting)** | React/Astro escapan output por defecto. Headers de seguridad.     |   ‚úÖ   |
| **Brute Force**                | Rate Limiting en endpoints de login                               |   ‚ö†Ô∏è   |
| **Data Leakage**               | Logs sanitizados y esquemas segregados                            |   ‚úÖ   |
| **CSRF**                       | Cookies `SameSite=Strict`, tokens CSRF en forms cr√≠ticos          |   ‚úÖ   |

<Aside type="caution" title="Pendiente">
  Rate Limiting requiere configuraci√≥n adicional en Nginx/Gateway para
  producci√≥n.
</Aside>

---

## Auditor√≠a y Compliance

<Steps>
  1. **Revisi√≥n de Dependencias** - `npm audit` ejecutado en CI/CD 2. **An√°lisis
  Est√°tico** - ESLint + reglas de seguridad 3. **Revisi√≥n Manual** - Commits
  sensibles revisados por peer 4. **Penetration Testing** - Planificado
  trimestralmente
</Steps>

---

## Navegaci√≥n

<CardGrid>
  <LinkCard
    title="Autenticaci√≥n JWT"
    description="Sistema de tokens y RBAC"
    href="/seguridad/autenticacion/"
  />
  <LinkCard
    title="Buenas Pr√°cticas"
    description="Gu√≠as para desarrolladores"
    href="/seguridad/practicas/"
  />
  <LinkCard
    title="Protecci√≥n de Datos"
    description="Cifrado y manejo de PII"
    href="/seguridad/practicas/datos/"
  />
  <LinkCard
    title="Infraestructura"
    description="Seguridad de red y servidores"
    href="/seguridad/practicas/infraestructura/"
  />
  <LinkCard
    title="Agente Guardes"
    description="Seguridad Defensiva y Auditor√≠a"
    href="/seguridad/guardes/"
  />
</CardGrid>

<Aside type="tip" title="Principio Rector">
  "La seguridad no es un producto, es un proceso." ‚Äî Bruce Schneier
</Aside>

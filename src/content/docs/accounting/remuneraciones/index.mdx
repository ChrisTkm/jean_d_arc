---
title: Schema de Remuneraciones
description: Documentaci贸n t茅cnica del m贸dulo de remuneraciones (PostgreSQL)
sidebar:
  label: Overview
  order: 1
updated: 2025-12-28
---

import { LinkCard, CardGrid, Card } from "@astrojs/starlight/components";

Este m贸dulo gestiona el c谩lculo de remuneraciones, liquidaciones, leyes sociales e historial de pagos. Est谩 dise帽ado bajo una arquitectura **Master-Detail** y fuertemente integrado con el plan contable.

##  Navegaci贸n R谩pida

<CardGrid stagger>
  <LinkCard
    title="Motor de C谩lculo"
    description="Arquitectura H铆brida TypeScript + PostgreSQL"
    href="./motor-calculo/"
  />
  <LinkCard
    title="L贸gica de Negocio"
    description="F贸rmulas de Sueldo, Gratificaci贸n y Leyes Sociales"
    href="./calculos/"
  />
  <LinkCard
    title="Diagramas y Flujos"
    description="Visualizaci贸n de la arquitectura y procesos"
    href="./diagramas/"
  />
  <LinkCard
    title="Generaci贸n de Imposiciones"
    description="Procesos de consolidaci贸n mensual (Previred/F29)"
    href="./PrevisionsService/"
  />
  <LinkCard
    title="Generaci贸n de Liquidaciones"
    description="PayrollService: Fetch, Calculate & Persist"
    href="./PayrollService/"
  />
  <LinkCard
    title="Generaci贸n de Honorarios"
    description="HonorariosService: Routing de boletas SII"
    href="./HonorariosService/"
  />
</CardGrid>

## Arquitectura General

El schema `remuneraciones` centraliza toda la l贸gica de n贸mina. Su n煤cleo es la relaci贸n entre la cabecera de la liquidaci贸n y sus detalles desglosados concepto por concepto.

:::note[Integraci贸n Contable]
A diferencia de sistemas antiguos, aqu铆 **cada concepto de remuneraci贸n** (haber o descuento) sabe exactamente a qu茅 cuenta contable imputarse. Esto permite generar el asiento contable de remuneraciones de forma autom谩tica.
:::

## Componentes Principales

<CardGrid>
  <Card title="1. Maestro de Empleados" icon="user">
    Tabla `empleados`. Contiene la informaci贸n contractual, personal y
    previsional. Es la base para cualquier c谩lculo.
  </Card>
  <Card title="2. Definici贸n de Conceptos" icon="list-format">
    Tabla `conceptos_remuneracion`. Cat谩logo maestro que define: - **Qu茅 es**:
    Haber, Descuento, Aporte Patronal. - **C贸mo se calcula**: F贸rmula, Monto
    Fijo, Porcentaje. - **D贸nde se contabiliza**: Cuentas de Gasto, Pasivo, etc.
  </Card>
  <Card title="3. Motor de C谩lculo" icon="setting">
    Arquitectura H铆brida (**TypeScript** + PostgreSQL). 1. **Orchestrator**:
    Calcula haberes y descuentos (L贸gica de Negocio). 2. **Repositorio**:
    Obtiene contratos y asistencia. 3. **Persistencia**: Guarda resultados en
    `liquidaciones`.
  </Card>
</CardGrid>

## Flujo de Datos

```mermaid
graph TD
    EMP[Empleados] --> CALC(Motor de C谩lculo)
    CON[Conceptos] --> CALC
    NOV[Novedades/Asistencia] --> CALC

    CALC -->|Genera| LIQ[Liquidaciones Header]
    CALC -->|Desglosa| DET[Liquidaciones Detalle]

    DET -.->|Imputaci贸n| CONT[Contabilidad]
```

## Ubicaci贸n del C贸digo

Todos los objetos de base de datos se encuentran en:
`Nostromo/db/accounting_template/remuneraciones/`

- **Funciones (L贸gica)**: `/fx`
- **Procedimientos (Orquestaci贸n)**: `/sp`

---
title: Cálculo de Finiquitos
description: Reglas de negocio y lógica para el cálculo de indemnizaciones por término de contrato.
sidebar:
  label: Finiquitos
  order: 6
updated: 2025-12-28
---

import { Tabs, TabItem, Steps } from "@astrojs/starlight/components";

El módulo de finiquitos calcula las indemnizaciones legales correspondientes al término de la relación laboral.

## Lógica de Cálculo

El `FiniquitoCalculator` implementa las reglas del Código del Trabajo chileno respecto a antigüedad, topes y vacaciones.

### 1. Antigüedad y Años de Servicio

<Tabs>
  <TabItem label="Regla Negocio">
  - **Base**: Fecha Término - Fecha Inicio.
  - **Redondeo (Art. 163)**: Una fracción superior a 6 meses equivale a un año completo.
  - **Tope Legal**: Máximo 11 años para indemnización (salvo contratos antiguos pre-1981).
  </TabItem>
  <TabItem label="TypeScript">
  ```typescript
  // src/domain/payroll/calculators/FiniquitoCalculator.ts
  const years = differenceInYears(fechaTermino, fechaInicio);
  const months = differenceInMonths(fechaTermino, fechaInicio) % 12;
  
  let aniosRedondeados = years;
  if (months >= 6) {
    aniosRedondeados += 1;
  }
  
  const topeLegal = causal.topeAnios ?? 11;
  const aniosPagables = Math.min(aniosRedondeados, topeLegal);
  ```
  </TabItem>
</Tabs>

### 2. Base de Cálculo (Indemnización)

La base para el cálculo de indemnizaciones incluye la remuneración mensual fija más el promedio de variables.

<Steps>
1. **Remuneración Fija**: Sueldo Base + Gratificación + Colación + Movilización.
   > **Nota**: Colación y Movilización SE INCLUYEN en la base de indemnización (según jurisprudencia constante), aunque no sean imponibles.
   
2. **Remuneración Variable**: Promedio de comisiones o tratos de los últimos 3 meses.

3. **Tope en UF**: La base total tiene un tope máximo de **90 UF** (Art. 172).

</Steps>

### 3. Vacaciones

<Tabs>
  <TabItem label="Proporcionales">
    Si el trabajador lleva menos de un año, o para la fracción del año final: $$
    DiasProporcionales = 1.25 \times MesesTrabajados $$
  </TabItem>
  <TabItem label="Pendientes">
    Días hábiles acumulados de períodos anteriores que no fueron tomados. Se
    pagan al valor del día hábil promedio.
  </TabItem>
</Tabs>

## Simulación vs Generación

El sistema permite dos modos de operación:

1. **Simulación (`/simulate`)**: Calcula los montos en memoria sin persistir nada. Útil para previsualizar el costo del despido.
2. **Generación (`/generate`)**: Invoca el Stored Procedure `sp_calcular_finiquito`, el cual guarda el documento y cierra el contrato.

## Referencias

- **Calculadora**: [FiniquitoCalculator.ts](../../Accounting/orchestrator/src/domain/payroll/calculators/FiniquitoCalculator.ts)
- **API Router**: [finiquitos.ts](../../Accounting/orchestrator/src/routes/remuneraciones/finiquitos.ts)
